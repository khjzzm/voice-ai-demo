<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice AI Demo - ElevenLabs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            background: #fafafa;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .file-input {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .file-input:hover {
            background: #5a6fd8;
        }

        .file-input input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 1;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            display: none;
        }

        .result.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .result.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .voice-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .voice-item {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .voice-item h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .voice-item p {
            color: #666;
            margin-bottom: 15px;
        }

        .audio-player {
            width: 100%;
            margin-top: 10px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .content {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .header p {
                font-size: 1em;
            }
            
            /* ëª¨ë°”ì¼ì—ì„œ íƒ­ ë²„íŠ¼ ì„¸ë¡œ ë°°ì¹˜ */
            .tab-buttons {
                flex-direction: column;
            }
            
            .tab-button {
                border-radius: 0;
                border-bottom: 1px solid #dee2e6;
                font-size: 14px;
                padding: 12px 15px;
            }
            
            .tab-button:first-child {
                border-radius: 8px 8px 0 0;
            }
            
            .tab-button:last-child {
                border-radius: 0 0 8px 8px;
                border-bottom: none;
            }
            
            .tab-content {
                border-radius: 0 0 8px 8px;
                padding: 20px;
            }
        }

        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .tab-container {
            margin-bottom: 30px;
        }

        .tab-buttons {
            display: flex;
            background: #f8f9fa;
            border-radius: 8px 8px 0 0;
            overflow: hidden;
            border: 1px solid #dee2e6;
        }

        .tab-button {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-button:hover {
            background: #e9ecef;
            color: #495057;
        }

        .tab-button.active {
            background: white;
            color: #007bff;
            border-bottom-color: #007bff;
        }

        .tab-content {
            display: none;
            background: white;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 8px 8px;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        /* TTS íˆìŠ¤í† ë¦¬ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .history-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .history-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .history-item h3 {
            margin: 0 0 10px 0;
            color: #333;
        }

        .history-item p {
            margin: 5px 0;
            color: #666;
        }

        .history-item .audio-controls {
            margin-top: 15px;
        }

        .history-item .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .history-item .btn-small {
            padding: 5px 10px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Voice AI Demo</h1>
            <p>ElevenLabs APIë¥¼ ì‚¬ìš©í•œ ìŒì„± í•™ìŠµ ë° TTS ì„œë¹„ìŠ¤</p>
            <div style="background: #e3f2fd; border: 2px solid #2196f3; border-radius: 8px; padding: 15px; margin-top: 15px; font-size: 14px; color: #1565c0;">
                <strong style="color: #0d47a1;">ğŸ¤ ë§ˆì´í¬ ê¶Œí•œ ì•ˆë‚´:</strong> Chromeì—ì„œ ë§ˆì´í¬ ê¶Œí•œì´ í•„ìš”í•˜ë©´ <strong style="color: #d32f2f;">chrome://flags/#unsafely-treat-insecure-origin-as-secure</strong>ì—ì„œ <strong style="color: #d32f2f;">http://61.80.148.182:8080/</strong>ì„ ì¶”ê°€í•˜ì„¸ìš”.
            </div>
        </div>

        <div class="content">
            <!-- íƒ­ ì»¨í…Œì´ë„ˆ -->
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" onclick="showTab('create')">ìŒì„± ëª¨ë¸ ìƒì„±</button>
                    <button class="tab-button" onclick="showTab('default-tts')">ê¸°ë³¸ TTS</button>
                    <button class="tab-button" onclick="showTab('user-tts')">ì‚¬ìš©ì TTS</button>
                    <button class="tab-button" onclick="showTab('voices')">ìŒì„± ëª¨ë¸ ê´€ë¦¬</button>
                    <button class="tab-button" onclick="showTab('history')">TTS íˆìŠ¤í† ë¦¬</button>
                    <button class="tab-button" onclick="showTab('account')">ê³„ì • ì •ë³´</button>
                </div>

                <!-- ìŒì„± ëª¨ë¸ ìƒì„± íƒ­ -->
                <div id="create-tab" class="tab-content active">
                    <div class="section full-width">
                        <h2>ìŒì„± ëª¨ë¸ ìƒì„± ê°€ì´ë“œ</h2>
                        
                        <p style="color: #666; margin-bottom: 20px;">ìŒì„± ëª¨ë¸ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ê³¼ ì£¼ì˜ì‚¬í•­ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. ì‹¤ì œ ìŒì„± ëª¨ë¸ ìƒì„±ì€ "ì‚¬ìš©ì TTS" íƒ­ì—ì„œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        
                        <!-- ì£¼ì˜ì‚¬í•­ ë° íŒ ë°•ìŠ¤ -->
                        <div style="background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <h4 style="color: #1976d2; margin: 0 0 10px 0;">ğŸ“‹ ìŒì„± ëª¨ë¸ ìƒì„± ê°€ì´ë“œ</h4>
                            <div style="font-size: 14px; color: #333;">
                                <p style="margin: 5px 0;"><strong>ğŸ¤ ìŒì„± ì…ë ¥ ë°©ë²•:</strong></p>
                                <ul style="margin: 5px 0; padding-left: 20px;">
                                    <li><strong>íŒŒì¼ ì—…ë¡œë“œ:</strong> ê¸°ì¡´ ìŒì„± íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ì‚¬ìš©</li>
                                    <li><strong>ì§ì ‘ ë…¹ìŒ:</strong> ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŒì„± ë…¹ìŒ (ë§ˆì´í¬ ê¶Œí•œ í•„ìš”)</li>
                                </ul>
                                <p style="margin: 5px 0;"><strong>âœ… ê¶Œì¥ì‚¬í•­:</strong></p>
                                <ul style="margin: 5px 0; padding-left: 20px;">
                                    <li>ìŒì„± íŒŒì¼ ê¸¸ì´: 30ì´ˆ ~ 5ë¶„ (ìµœì : 1-3ë¶„)</li>
                                    <li>ìŒì„± í’ˆì§ˆ: ê¹¨ë—í•˜ê³  ëª…í™•í•œ ìŒì„±</li>
                                    <li>íŒŒì¼ í˜•ì‹: MP3, WAV, M4A (ìµœëŒ€ 100MB)</li>
                                    <li>ìŒì„± ë‚´ìš©: ë‹¤ì–‘í•œ ë¬¸ì¥ê³¼ ì–µì–‘ í¬í•¨</li>
                                </ul>
                                <p style="margin: 5px 0;"><strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong></p>
                                <ul style="margin: 5px 0; padding-left: 20px;">
                                    <li>ë°°ê²½ ì†ŒìŒì´ ì ì€ í™˜ê²½ì—ì„œ ë…¹ìŒ</li>
                                    <li>ì¼ê´€ëœ ìŒëŸ‰ê³¼ í†¤ìœ¼ë¡œ ë…¹ìŒ</li>
                                    <li>ë‹¤ë¥¸ ì‚¬ëŒì˜ ìŒì„±ì€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”</li>
                                    <li>ìŒì„± ëª¨ë¸ ìƒì„±ì—ëŠ” 5-10ë¶„ ì •ë„ ì†Œìš”</li>
                                    <li>ë…¹ìŒ ì‹œ ë¸Œë¼ìš°ì €ì—ì„œ ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- ì‹¤ì œ ìŒì„± ëª¨ë¸ ìƒì„±ìœ¼ë¡œ ì´ë™ ì•ˆë‚´ -->
                        <div style="background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 20px; margin-top: 20px; text-align: center;">
                            <h4 style="color: #388e3c; margin: 0 0 15px 0;">ğŸ¯ ì‹¤ì œ ìŒì„± ëª¨ë¸ ìƒì„±í•˜ê¸°</h4>
                            <p style="color: #333; margin-bottom: 15px;">ìœ„ì˜ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì—¬ ì‹¤ì œë¡œ ìŒì„± ëª¨ë¸ì„ ìƒì„±í•˜ë ¤ë©´ "ì‚¬ìš©ì TTS" íƒ­ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.</p>
                            <button onclick="showTab('user-tts')" class="btn" style="background: #4caf50;">ì‚¬ìš©ì TTS íƒ­ìœ¼ë¡œ ì´ë™</button>
                        </div>
                    </div>
                </div>

                <!-- ê¸°ë³¸ TTS íƒ­ -->
                <div id="default-tts-tab" class="tab-content">
                    <div class="section full-width">
                        <h2>ê¸°ë³¸ ìŒì„± TTS í…ŒìŠ¤íŠ¸</h2>
                        
                        <p style="color: #666; margin-bottom: 20px;">ElevenLabsì—ì„œ ì œê³µí•˜ëŠ” ëª¨ë“  ìŒì„±ë“¤ë¡œ TTSë¥¼ ë°”ë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!</p>
                            
                            <!-- TTS íŒ ë°•ìŠ¤ -->
                            <div style="background: #fff3e0; border: 1px solid #ff9800; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="color: #f57c00; margin: 0 0 10px 0;">ğŸ’¡ TTS ìƒì„± íŒ</h4>
                                <div style="font-size: 14px; color: #333;">
                                    <p style="margin: 5px 0;"><strong>ğŸ¯ íš¨ê³¼ì ì¸ TTSë¥¼ ìœ„í•œ íŒ:</strong></p>
                                    <ul style="margin: 5px 0; padding-left: 20px;">
                                        <li>ë¬¸ì¥ ëì— ë§ˆì¹¨í‘œ(.)ë¥¼ ë„£ìœ¼ë©´ ìì—°ìŠ¤ëŸ¬ìš´ íœ´ì‹</li>
                                        <li>ê¸´ ë¬¸ì¥ì€ ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ë©´ ë” ìì—°ìŠ¤ëŸ¬ì›€</li>
                                        <li>í•œê¸€ê³¼ ì˜ì–´ë¥¼ í˜¼ìš©í•´ë„ ì˜ ì‘ë™í•©ë‹ˆë‹¤</li>
                                        <li>ê°ì •ì„ í‘œí˜„í•˜ë ¤ë©´ ëŠë‚Œí‘œ(!) ì‚¬ìš©</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <form id="defaultVoiceForm">
                                <div class="form-group">
                                    <label for="defaultVoiceSelect">ìŒì„± ì„ íƒ:</label>
                                    <select id="defaultVoiceSelect" name="defaultVoiceId" required style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                                        <option value="">ìŒì„±ì„ ì„ íƒí•˜ì„¸ìš”...</option>
                                    </select>
                                    <small style="color: #666; font-size: 12px;">ê¸°ë³¸ ì œê³µ ìŒì„±ê³¼ ë‚´ê°€ ìƒì„±í•œ ìŒì„± ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤!</small>
                                </div>
                                <div class="form-group">
                                    <label for="defaultTextToSpeech">ë³€í™˜í•  í…ìŠ¤íŠ¸:</label>
                                    <textarea id="defaultTextToSpeech" name="text" placeholder="ìŒì„±ìœ¼ë¡œ ë³€í™˜í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ë„¤ìš”.)" required></textarea>
                                    <small style="color: #666; font-size: 12px;">í•œê¸€, ì˜ì–´ ëª¨ë‘ ì§€ì›ë©ë‹ˆë‹¤. ë¬¸ì¥ ë¶€í˜¸ë¥¼ í™œìš©í•˜ë©´ ë” ìì—°ìŠ¤ëŸ¬ìš´ ìŒì„±ì´ ìƒì„±ë©ë‹ˆë‹¤.</small>
                                </div>
                                <div class="form-group">
                                    <label for="defaultFilename">íŒŒì¼ëª… (ì„ íƒì‚¬í•­):</label>
                                    <input type="text" id="defaultFilename" name="filename" placeholder="ì˜ˆ: my_speech.mp3" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                                    <small style="color: #666; font-size: 12px;">íŒŒì¼ëª…ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.</small>
                                </div>
                                <button type="submit" class="btn">ì„ íƒí•œ ìŒì„±ìœ¼ë¡œ TTS ìƒì„±</button>
                            </form>
                            <div id="defaultVoiceResult" class="result"></div>
                            <audio id="defaultGeneratedAudio" controls style="display: none; width: 100%; margin-top: 20px;"></audio>
                            <div id="defaultAudioUrl" style="display: none; margin-top: 20px;">
                                <h4>ğŸµ ìƒì„±ëœ ìŒì„± URL:</h4>
                                <input type="text" id="defaultAudioUrlInput" readonly style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; background: #f9f9f9; font-size: 12px;">
                                <button onclick="copyToClipboard('defaultAudioUrlInput')" class="btn" style="margin-top: 10px; padding: 8px 16px; font-size: 14px;">URL ë³µì‚¬</button>
                                <button onclick="downloadDefaultAudio()" class="btn" style="margin-top: 10px; margin-left: 10px; padding: 8px 16px; font-size: 14px; background: #28a745;">MP3 ë‹¤ìš´ë¡œë“œ</button>
                            </div>
                        </div>
                </div>

                <!-- ì‚¬ìš©ì TTS íƒ­ -->
                <div id="user-tts-tab" class="tab-content">
                    <div class="main-grid">
                        <!-- ì™¼ìª½ ì—´: ìŒì„± ëª¨ë¸ ìƒì„± -->
                        <div class="section">
                            <h2>ìŒì„± ëª¨ë¸ ìƒì„±</h2>
                            
                            <!-- ì£¼ì˜ì‚¬í•­ ë° íŒ ë°•ìŠ¤ -->
                            <div style="background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="color: #1976d2; margin: 0 0 10px 0;">ğŸ“‹ ìŒì„± ëª¨ë¸ ìƒì„± ê°€ì´ë“œ</h4>
                                <div style="font-size: 14px; color: #333;">
                                    <p style="margin: 5px 0;"><strong>ğŸ¤ ìŒì„± ì…ë ¥ ë°©ë²•:</strong></p>
                                    <ul style="margin: 5px 0; padding-left: 20px;">
                                        <li><strong>íŒŒì¼ ì—…ë¡œë“œ:</strong> ê¸°ì¡´ ìŒì„± íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ì‚¬ìš©</li>
                                        <li><strong>ì§ì ‘ ë…¹ìŒ:</strong> ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŒì„± ë…¹ìŒ (ë§ˆì´í¬ ê¶Œí•œ í•„ìš”)</li>
                                    </ul>
                                    <p style="margin: 5px 0;"><strong>âœ… ê¶Œì¥ì‚¬í•­:</strong></p>
                                    <ul style="margin: 5px 0; padding-left: 20px;">
                                        <li>ìŒì„± íŒŒì¼ ê¸¸ì´: 30ì´ˆ ~ 5ë¶„ (ìµœì : 1-3ë¶„)</li>
                                        <li>ìŒì„± í’ˆì§ˆ: ê¹¨ë—í•˜ê³  ëª…í™•í•œ ìŒì„±</li>
                                        <li>íŒŒì¼ í˜•ì‹: MP3, WAV, M4A (ìµœëŒ€ 100MB)</li>
                                        <li>ìŒì„± ë‚´ìš©: ë‹¤ì–‘í•œ ë¬¸ì¥ê³¼ ì–µì–‘ í¬í•¨</li>
                                    </ul>
                                    <p style="margin: 5px 0;"><strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong></p>
                                    <ul style="margin: 5px 0; padding-left: 20px;">
                                        <li>ë°°ê²½ ì†ŒìŒì´ ì ì€ í™˜ê²½ì—ì„œ ë…¹ìŒ</li>
                                        <li>ì¼ê´€ëœ ìŒëŸ‰ê³¼ í†¤ìœ¼ë¡œ ë…¹ìŒ</li>
                                        <li>ë‹¤ë¥¸ ì‚¬ëŒì˜ ìŒì„±ì€ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”</li>
                                        <li>ìŒì„± ëª¨ë¸ ìƒì„±ì—ëŠ” 5-10ë¶„ ì •ë„ ì†Œìš”</li>
                                        <li>ë…¹ìŒ ì‹œ ë¸Œë¼ìš°ì €ì—ì„œ ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <form id="createModelForm">
                                <div class="form-group">
                                    <label for="modelName">ëª¨ë¸ ì´ë¦„:</label>
                                    <input type="text" id="modelName" name="name" placeholder="ì˜ˆ: ë‚´ ëª©ì†Œë¦¬" required>
                                    <small style="color: #666; font-size: 12px;">í•œêµ­ì–´ ì´ë¦„ì„ ì‚¬ìš©í•˜ë©´ ë‚˜ì¤‘ì— ì°¾ê¸° ì‰½ìŠµë‹ˆë‹¤.</small>
                                </div>
                                <div class="form-group">
                                    <label for="modelLanguage">ì–¸ì–´/ì§€ì—­ ì„ íƒ:</label>
                                    <select id="modelLanguage" name="language" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                                        <option value="">ì–¸ì–´/ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´ (Korean)</option>
                                        <option value="en">ğŸ‡ºğŸ‡¸ ì˜ì–´ (English)</option>
                                        <option value="ja">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´ (Japanese)</option>
                                        <option value="zh">ğŸ‡¨ğŸ‡³ ì¤‘êµ­ì–´ (Chinese)</option>
                                        <option value="es">ğŸ‡ªğŸ‡¸ ìŠ¤í˜ì¸ì–´ (Spanish)</option>
                                        <option value="fr">ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤ì–´ (French)</option>
                                        <option value="de">ğŸ‡©ğŸ‡ª ë…ì¼ì–´ (German)</option>
                                        <option value="it">ğŸ‡®ğŸ‡¹ ì´íƒˆë¦¬ì•„ì–´ (Italian)</option>
                                        <option value="pt">ğŸ‡µğŸ‡¹ í¬ë¥´íˆ¬ê°ˆì–´ (Portuguese)</option>
                                        <option value="ru">ğŸ‡·ğŸ‡º ëŸ¬ì‹œì•„ì–´ (Russian)</option>
                                        <option value="ar">ğŸ‡¸ğŸ‡¦ ì•„ëì–´ (Arabic)</option>
                                        <option value="hi">ğŸ‡®ğŸ‡³ íŒë””ì–´ (Hindi)</option>
                                        <option value="th">ğŸ‡¹ğŸ‡­ íƒœêµ­ì–´ (Thai)</option>
                                        <option value="vi">ğŸ‡»ğŸ‡³ ë² íŠ¸ë‚¨ì–´ (Vietnamese)</option>
                                        <option value="nl">ğŸ‡³ğŸ‡± ë„¤ëœë€ë“œì–´ (Dutch)</option>
                                        <option value="sv">ğŸ‡¸ğŸ‡ª ìŠ¤ì›¨ë´ì–´ (Swedish)</option>
                                        <option value="no">ğŸ‡³ğŸ‡´ ë…¸ë¥´ì›¨ì´ì–´ (Norwegian)</option>
                                        <option value="da">ğŸ‡©ğŸ‡° ë´ë§ˆí¬ì–´ (Danish)</option>
                                        <option value="fi">ğŸ‡«ğŸ‡® í•€ë€ë“œì–´ (Finnish)</option>
                                        <option value="pl">ğŸ‡µğŸ‡± í´ë€ë“œì–´ (Polish)</option>
                                        <option value="tr">ğŸ‡¹ğŸ‡· í„°í‚¤ì–´ (Turkish)</option>
                                        <option value="he">ğŸ‡®ğŸ‡± íˆë¸Œë¦¬ì–´ (Hebrew)</option>
                                        <option value="id">ğŸ‡®ğŸ‡© ì¸ë„ë„¤ì‹œì•„ì–´ (Indonesian)</option>
                                        <option value="ms">ğŸ‡²ğŸ‡¾ ë§ë ˆì´ì–´ (Malay)</option>
                                        <option value="fil">ğŸ‡µğŸ‡­ í•„ë¦¬í•€ì–´ (Filipino)</option>
                                        <option value="uk">ğŸ‡ºğŸ‡¦ ìš°í¬ë¼ì´ë‚˜ì–´ (Ukrainian)</option>
                                        <option value="cs">ğŸ‡¨ğŸ‡¿ ì²´ì½”ì–´ (Czech)</option>
                                        <option value="hu">ğŸ‡­ğŸ‡º í—ê°€ë¦¬ì–´ (Hungarian)</option>
                                        <option value="ro">ğŸ‡·ğŸ‡´ ë£¨ë§ˆë‹ˆì•„ì–´ (Romanian)</option>
                                        <option value="bg">ğŸ‡§ğŸ‡¬ ë¶ˆê°€ë¦¬ì•„ì–´ (Bulgarian)</option>
                                        <option value="hr">ğŸ‡­ğŸ‡· í¬ë¡œì•„í‹°ì•„ì–´ (Croatian)</option>
                                        <option value="sk">ğŸ‡¸ğŸ‡° ìŠ¬ë¡œë°”í‚¤ì•„ì–´ (Slovak)</option>
                                        <option value="sl">ğŸ‡¸ğŸ‡® ìŠ¬ë¡œë² ë‹ˆì•„ì–´ (Slovenian)</option>
                                        <option value="et">ğŸ‡ªğŸ‡ª ì—ìŠ¤í† ë‹ˆì•„ì–´ (Estonian)</option>
                                        <option value="lv">ğŸ‡±ğŸ‡» ë¼íŠ¸ë¹„ì•„ì–´ (Latvian)</option>
                                        <option value="lt">ğŸ‡±ğŸ‡¹ ë¦¬íˆ¬ì•„ë‹ˆì•„ì–´ (Lithuanian)</option>
                                        <option value="el">ğŸ‡¬ğŸ‡· ê·¸ë¦¬ìŠ¤ì–´ (Greek)</option>
                                        <option value="ca">ğŸ‡ªğŸ‡¸ ì¹´íƒˆë£¨ëƒì–´ (Catalan)</option>
                                        <option value="eu">ğŸ‡ªğŸ‡¸ ë°”ìŠ¤í¬ì–´ (Basque)</option>
                                        <option value="gl">ğŸ‡ªğŸ‡¸ ê°ˆë¦¬ì‹œì•„ì–´ (Galician)</option>
                                        <option value="cy">ğŸ‡¬ğŸ‡§ ì›¨ì¼ìŠ¤ì–´ (Welsh)</option>
                                        <option value="ga">ğŸ‡®ğŸ‡ª ì•„ì¼ëœë“œì–´ (Irish)</option>
                                        <option value="mt">ğŸ‡²ğŸ‡¹ ëª°íƒ€ì–´ (Maltese)</option>
                                        <option value="is">ğŸ‡®ğŸ‡¸ ì•„ì´ìŠ¬ë€ë“œì–´ (Icelandic)</option>
                                    </select>
                                    <small style="color: #666; font-size: 12px;">ğŸ’¡ ì–¸ì–´ë¥¼ ì„ íƒí•˜ë©´ ë” ì •í™•í•œ ìŒì„± ëª¨ë¸ì´ ìƒì„±ë©ë‹ˆë‹¤. í•œêµ­ì–´ ìŒì„± ëª¨ë¸ì„ ë§Œë“¤ë ¤ë©´ í•œêµ­ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”.</small>
                                </div>
                                <div class="form-group">
                                    <label for="modelDescription">ì„¤ëª…:</label>
                                    <textarea id="modelDescription" name="description" placeholder="ìŒì„± ëª¨ë¸ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë‚´ ëª©ì†Œë¦¬ë¡œ ë§Œë“  TTS ëª¨ë¸)"></textarea>
                                    <small style="color: #666; font-size: 12px;">ë‚˜ì¤‘ì— ìŒì„± ëª¨ë¸ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ì„¤ëª…ì…ë‹ˆë‹¤.</small>
                                </div>
                                <div class="form-group">
                                    <label>ìŒì„± ì…ë ¥ ë°©ë²•:</label>
                                    <div style="margin-bottom: 15px;">
                                        <label style="display: inline-block; margin-right: 20px;">
                                            <input type="radio" name="audioInput" value="file" checked> íŒŒì¼ ì—…ë¡œë“œ
                                        </label>
                                        <label style="display: inline-block;">
                                            <input type="radio" name="audioInput" value="record"> ì§ì ‘ ë…¹ìŒ
                                        </label>
                                    </div>
                                    
                                    <!-- íŒŒì¼ ì—…ë¡œë“œ ì„¹ì…˜ -->
                                    <div id="fileUploadSection">
                                        <label for="audioFile">ìŒì„± íŒŒì¼ (MP3, WAV, M4A):</label>
                                        <div class="file-input">
                                            <span>íŒŒì¼ ì„ íƒ</span>
                                            <input type="file" id="audioFile" name="audioFile" accept="audio/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;">
                                        </div>
                                        <div id="selectedFile" style="margin-top: 10px; color: #666;"></div>
                                        <small style="color: #666; font-size: 12px;">íŒŒì¼ í¬ê¸°: ìµœëŒ€ 100MB | ê¶Œì¥ ê¸¸ì´: 1-3ë¶„</small>
                                    </div>
                                    
                                    <!-- ì§ì ‘ ë…¹ìŒ ì„¹ì…˜ -->
                                    <div id="recordSection" style="display: none;">
                                        <label>ìŒì„± ë…¹ìŒ:</label>
                                        <div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin-top: 10px;">
                                            
                                            <!-- ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸ ì„¹ì…˜ -->
                                            <div style="margin-bottom: 20px;">
                                                <h5 style="color: #495057; margin-bottom: 10px;">ğŸ“ ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸ (ê¶Œì¥)</h5>
                                                <div style="background: white; border: 1px solid #ced4da; border-radius: 6px; padding: 15px; max-height: 200px; overflow-y: auto;">
                                                    <div id="scriptContent" style="font-size: 14px; line-height: 1.6; color: #333;">
                                                        <p><strong>ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ë„¤ìš”.</strong></p>
                                                        <p>ì €ëŠ” ì¸ê³µì§€ëŠ¥ ìŒì„± ëª¨ë¸ì„ ë§Œë“¤ê¸° ìœ„í•´ ë…¹ìŒì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                                                        <p>ì´ ìŒì„±ì€ ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ì‚¬ìš©ë  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
                                                        <p>ê°ì‚¬í•©ë‹ˆë‹¤! ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”.</p>
                                                    </div>
                                                </div>
                                                <div style="margin-top: 10px;">
                                                    <button type="button" id="nextScriptBtn" class="btn" style="background: #17a2b8; padding: 8px 16px; font-size: 14px; margin-right: 10px;">
                                                        ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸
                                                    </button>
                                                    <button type="button" id="customScriptBtn" class="btn" style="background: #6f42c1; padding: 8px 16px; font-size: 14px;">
                                                        ì§ì ‘ ì…ë ¥
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            <div style="text-align: center; margin-bottom: 15px;">
                                                <button type="button" id="startRecordBtn" class="btn" style="background: #28a745; margin-right: 10px;">
                                                    ğŸ¤ ë…¹ìŒ ì‹œì‘
                                                </button>
                                                <button type="button" id="stopRecordBtn" class="btn" style="background: #dc3545; display: none;">
                                                    â¹ï¸ ë…¹ìŒ ì¤‘ì§€
                                                </button>
                                            </div>
                                            <div id="recordingStatus" style="text-align: center; margin-bottom: 15px; display: none;">
                                                <div style="color: #dc3545; font-weight: bold;">ğŸ™ï¸ ë…¹ìŒ ì¤‘...</div>
                                                <div id="recordingTime" style="font-size: 18px; font-weight: bold; color: #333;">00:00</div>
                                                <div style="margin-top: 10px; font-size: 12px; color: #666;">
                                                    ğŸ’¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë”°ë¼ ì²œì²œíˆ, ëª…í™•í•˜ê²Œ ì½ì–´ì£¼ì„¸ìš”!
                                                </div>
                                            </div>
                                            <div id="recordedAudio" style="display: none;">
                                                <audio id="recordedAudioPlayer" controls style="width: 100%; margin-bottom: 10px;"></audio>
                                                <div style="text-align: center;">
                                                    <button type="button" id="reRecordBtn" class="btn" style="background: #6c757d; margin-right: 10px;">
                                                        ğŸ”„ ë‹¤ì‹œ ë…¹ìŒ
                                                    </button>
                                                    <button type="button" id="useRecordedBtn" class="btn" style="background: #007bff;">
                                                        âœ… ì´ ë…¹ìŒ ì‚¬ìš©
                                                    </button>
                                                </div>
                                            </div>
                                            <small style="color: #666; font-size: 12px; display: block; margin-top: 10px;">
                                                ğŸ’¡ ë…¹ìŒ íŒ: ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•˜ê³ , ì¡°ìš©í•œ í™˜ê²½ì—ì„œ 1-3ë¶„ ì •ë„ ë…¹ìŒí•˜ì„¸ìš”. ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë”°ë¼ ë‹¤ì–‘í•œ ì–µì–‘ìœ¼ë¡œ ì½ìœ¼ë©´ ë” ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="btn">ìŒì„± ëª¨ë¸ ìƒì„±</button>
                            </form>
                            <div id="createModelResult" class="result"></div>
                        </div>

                        <!-- ì˜¤ë¥¸ìª½ ì—´: ì‚¬ìš©ì TTS -->
                        <div class="section">
                            <h2>ì‚¬ìš©ì TTS</h2>
                            
                            <!-- ì‚¬ìš©ì ìŒì„± TTS ê°€ì´ë“œ -->
                            <div style="background: #f3e5f5; border: 1px solid #9c27b0; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="color: #7b1fa2; margin: 0 0 10px 0;">ğŸ¤ ì‚¬ìš©ì ìŒì„± TTS ê°€ì´ë“œ</h4>
                                <div style="font-size: 14px; color: #333;">
                                    <p style="margin: 5px 0;"><strong>ğŸ“ ì‚¬ìš© ë°©ë²•:</strong></p>
                                    <ol style="margin: 5px 0; padding-left: 20px;">
                                        <li>ì™¼ìª½ì—ì„œ ìŒì„± ëª¨ë¸ì„ ë¨¼ì € ìƒì„±í•˜ì„¸ìš”</li>
                                        <li>ì•„ë˜ì—ì„œ ìƒì„±ëœ ìŒì„±ì„ ì„ íƒí•˜ì„¸ìš”</li>
                                        <li>ë³€í™˜í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê³  TTSë¥¼ ìƒì„±í•˜ì„¸ìš”</li>
                                        <li>ìƒì„±ëœ ìŒì„±ì„ í™•ì¸í•˜ê³  ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”</li>
                                    </ol>
                                    <p style="margin: 5px 0;"><strong>ğŸ’¡ íŒ:</strong> ìŒì„± ì„ íƒ ì‹œ ìŒì„± IDê°€ ìë™ìœ¼ë¡œ ì…ë ¥ë©ë‹ˆë‹¤. ìŒì„± ëª¨ë¸ì´ ì—†ë‹¤ë©´ ì™¼ìª½ì—ì„œ ë¨¼ì € ìƒì„±í•˜ì„¸ìš”.</p>
                                </div>
                            </div>
                            
                            <form id="generateSpeechForm">
                                <div class="form-group">
                                    <label for="userVoiceSelect">ì‚¬ìš©ì ìŒì„± ì„ íƒ:</label>
                                    <select id="userVoiceSelect" name="userVoiceId" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                                        <option value="">ì‚¬ìš©ì ìŒì„±ì„ ì„ íƒí•˜ì„¸ìš”...</option>
                                    </select>
                                    <small style="color: #666; font-size: 12px;">ğŸ’¡ ìŒì„± ì„ íƒ ì‹œ ìŒì„± IDê°€ ìë™ìœ¼ë¡œ ì…ë ¥ë©ë‹ˆë‹¤.</small>
                                </div>
                                <div class="form-group">
                                    <label for="voiceId">ìŒì„± ID (ì§ì ‘ ì…ë ¥):</label>
                                    <input type="text" id="voiceId" name="voiceId" placeholder="ìƒì„±ëœ ìŒì„± ëª¨ë¸ì˜ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                                    <small style="color: #666; font-size: 12px;">ìœ„ì—ì„œ ìŒì„±ì„ ì„ íƒí•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.</small>
                                </div>
                                <div class="form-group">
                                    <label for="textToSpeech">ë³€í™˜í•  í…ìŠ¤íŠ¸:</label>
                                    <textarea id="textToSpeech" name="text" placeholder="ìŒì„±ìœ¼ë¡œ ë³€í™˜í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì•ˆë…•í•˜ì„¸ìš”! ì œ ëª©ì†Œë¦¬ë¡œ ë§Œë“  TTSì…ë‹ˆë‹¤.)" required></textarea>
                                    <small style="color: #666; font-size: 12px;">í•œê¸€, ì˜ì–´ ëª¨ë‘ ì§€ì›ë©ë‹ˆë‹¤. ë¬¸ì¥ ë¶€í˜¸ë¥¼ í™œìš©í•˜ë©´ ë” ìì—°ìŠ¤ëŸ¬ìš´ ìŒì„±ì´ ìƒì„±ë©ë‹ˆë‹¤.</small>
                                </div>
                                <div class="form-group">
                                    <label for="userFilename">íŒŒì¼ëª… (ì„ íƒì‚¬í•­):</label>
                                    <input type="text" id="userFilename" name="filename" placeholder="ì˜ˆ: my_voice_speech.mp3" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px;">
                                    <small style="color: #666; font-size: 12px;">íŒŒì¼ëª…ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.</small>
                                </div>
                                <button type="submit" class="btn">ì‚¬ìš©ì ìŒì„±ìœ¼ë¡œ TTS ìƒì„±</button>
                            </form>
                            <div id="generateSpeechResult" class="result"></div>
                            <audio id="generatedAudio" controls style="display: none; width: 100%; margin-top: 20px;"></audio>
                            <div id="userAudioUrl" style="display: none; margin-top: 20px;">
                                <h4>ğŸµ ìƒì„±ëœ ìŒì„± URL:</h4>
                                <input type="text" id="userAudioUrlInput" readonly style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; background: #f9f9f9; font-size: 12px;">
                                <button onclick="copyToClipboard('userAudioUrlInput')" class="btn" style="margin-top: 10px; padding: 8px 16px; font-size: 14px;">URL ë³µì‚¬</button>
                                <button onclick="downloadUserAudio()" class="btn" style="margin-top: 10px; margin-left: 10px; padding: 8px 16px; font-size: 14px; background: #28a745;">MP3 ë‹¤ìš´ë¡œë“œ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ìŒì„± ëª¨ë¸ ê´€ë¦¬ íƒ­ -->
                <div id="voices-tab" class="tab-content">
                    <div class="section full-width">
                        <h2>ìŒì„± ëª¨ë¸ ê´€ë¦¬</h2>
                        
                        <!-- ìŒì„± ëª©ë¡ ê°€ì´ë“œ -->
                        <div style="background: #e8f5e8; border: 1px solid #4caf50; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <h4 style="color: #388e3c; margin: 0 0 10px 0;">ğŸ“š ìŒì„± ëª¨ë¸ ê´€ë¦¬</h4>
                            <div style="font-size: 14px; color: #333;">
                                <p style="margin: 5px 0;"><strong>ğŸ” ìŒì„± ëª©ë¡ ë³´ê¸°:</strong></p>
                                <ul style="margin: 5px 0; padding-left: 20px;">
                                    <li><strong>ì „ì²´ ìŒì„± ëª©ë¡:</strong> ElevenLabsì—ì„œ ì œê³µí•˜ëŠ” ê¸°ë³¸ ìŒì„±ê³¼ ë‚´ê°€ ìƒì„±í•œ ìŒì„± ëª¨ë‘ í‘œì‹œ</li>
                                    <li><strong>ë‚´ ìŒì„±ë§Œ ë³´ê¸°:</strong> ë‚´ê°€ ìƒì„±í•œ ìŒì„± ëª¨ë¸ë§Œ í‘œì‹œ (ì¹´í…Œê³ ë¦¬: cloned)</li>
                                </ul>
                                <p style="margin: 5px 0;"><strong>ğŸ¯ ì‚¬ìš© ë°©ë²•:</strong> ì›í•˜ëŠ” ìŒì„±ì˜ "ì´ ìŒì„± ì‚¬ìš©" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ìŒì„± IDê°€ ìë™ìœ¼ë¡œ ì…ë ¥ë©ë‹ˆë‹¤.</p>
                                <p style="margin: 5px 0;"><strong>ğŸ—‘ï¸ ì‚­ì œ ê¸°ëŠ¥:</strong> ë‚´ê°€ ìƒì„±í•œ ìŒì„± ëª¨ë¸(cloned)ì—ë§Œ ì‚­ì œ ë²„íŠ¼ì´ í‘œì‹œë©ë‹ˆë‹¤. ì‚­ì œëœ ìŒì„± ëª¨ë¸ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìœ¼ë‹ˆ ì£¼ì˜í•˜ì„¸ìš”.</p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <button id="loadVoicesBtn" class="btn">ì „ì²´ ìŒì„± ëª©ë¡</button>
                            <button id="loadUserVoicesBtn" class="btn" style="margin-left: 10px; background: #28a745;">ë‚´ ìŒì„±ë§Œ ë³´ê¸°</button>
                        </div>
                        <div id="voicesResult" class="result"></div>
                        <div id="voicesList" class="voice-list"></div>
                    </div>
                </div>

                <!-- TTS íˆìŠ¤í† ë¦¬ íƒ­ -->
                <div id="history-tab" class="tab-content">
                    <div class="section full-width">
                        <h2>TTS ìƒì„± íˆìŠ¤í† ë¦¬</h2>
                        
                        <!-- íˆìŠ¤í† ë¦¬ ê°€ì´ë“œ -->
                        <div style="background: #fff8e1; border: 1px solid #ffc107; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <h4 style="color: #f57f17; margin: 0 0 10px 0;">ğŸ“– TTS íˆìŠ¤í† ë¦¬ ê´€ë¦¬</h4>
                            <div style="font-size: 14px; color: #333;">
                                <p style="margin: 5px 0;"><strong>ğŸ“‹ íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥:</strong></p>
                                <ul style="margin: 5px 0; padding-left: 20px;">
                                    <li><strong>ìƒì„±ëœ TTS ëª©ë¡:</strong> ì§€ê¸ˆê¹Œì§€ ìƒì„±í•œ ëª¨ë“  TTS ìŒì„± íŒŒì¼ í™•ì¸</li>
                                    <li><strong>ìŒì„± ì¬ìƒ:</strong> ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ìŒì„± íŒŒì¼ ì¬ìƒ ê°€ëŠ¥</li>
                                    <li><strong>MP3 ë‹¤ìš´ë¡œë“œ:</strong> ìƒì„±ëœ ìŒì„± íŒŒì¼ì„ ì»´í“¨í„°ì— ì €ì¥</li>
                                    <li><strong>íŒŒì¼ ì‚­ì œ:</strong> ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì€ ìŒì„± íŒŒì¼ ì‚­ì œ</li>
                                </ul>
                                <p style="margin: 5px 0;"><strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong> ElevenLabsëŠ” ìƒì„±ëœ ìŒì„± íŒŒì¼ì„ ì¼ì • ê¸°ê°„(ë³´í†µ 30ì¼) ë³´ê´€í•©ë‹ˆë‹¤. ì¤‘ìš”í•œ íŒŒì¼ì€ ë°˜ë“œì‹œ ë‹¤ìš´ë¡œë“œí•´ ë³´ê´€í•˜ì„¸ìš”.</p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <button id="loadHistoryBtn" class="btn" style="background: #17a2b8;">íˆìŠ¤í† ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                            <span style="margin-left: 15px; color: #666; font-size: 14px;">
                                ğŸ’¡ ElevenLabsëŠ” ìƒì„±ëœ ìŒì„± íŒŒì¼ì„ ì¼ì • ê¸°ê°„ ë³´ê´€í•©ë‹ˆë‹¤ (ë³´í†µ 30ì¼)
                            </span>
                        </div>
                        <div id="historyResult" class="result"></div>
                        <div id="historyList" class="history-list"></div>
                    </div>
                </div>

                <!-- ê³„ì • ì •ë³´ íƒ­ -->
                <div id="account-tab" class="tab-content">
                    <div class="section full-width">
                        <h2>ì‚¬ìš©ì ê³„ì • ì •ë³´</h2>
                        
                        <!-- ê³„ì • ì •ë³´ ê°€ì´ë“œ -->
                        <div style="background: #e8f4fd; border: 1px solid #0d6efd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <h4 style="color: #0d6efd; margin: 0 0 10px 0;">ğŸ“Š ê³„ì • ì‚¬ìš©ëŸ‰ ë° í•œë„</h4>
                            <div style="font-size: 14px; color: #333;">
                                <p style="margin: 5px 0;"><strong>ğŸ¯ ê³„ì • ì •ë³´:</strong></p>
                                <ul style="margin: 5px 0; padding-left: 20px;">
                                    <li><strong>ê³„ì • ìœ í˜•:</strong> í˜„ì¬ êµ¬ë… í”Œëœ í™•ì¸</li>
                                    <li><strong>ìŒì„± ëª¨ë¸ í•œë„:</strong> ìƒì„± ê°€ëŠ¥í•œ ìŒì„± ëª¨ë¸ ê°œìˆ˜</li>
                                    <li><strong>ì›”ê°„ ì‚¬ìš©ëŸ‰:</strong> ì´ë²ˆ ë‹¬ ì‚¬ìš©í•œ ë¬¸ì ìˆ˜</li>
                                    <li><strong>ë‚¨ì€ ì‚¬ìš©ëŸ‰:</strong> ì´ë²ˆ ë‹¬ ë‚¨ì€ ë¬¸ì ìˆ˜</li>
                                </ul>
                                <p style="margin: 5px 0;"><strong>ğŸ’¡ íŒ:</strong> ë¬´ë£Œ ê³„ì •ì€ ì›” 10,000ì, ìœ ë£Œ ê³„ì •ì€ ë” ë§ì€ í•œë„ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <button id="loadUserInfoBtn" class="btn" style="background: #0d6efd;">ê³„ì • ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                        </div>
                        <div id="userInfoResult" class="result"></div>
                        <div id="userInfoDisplay" style="display: none;">
                            <div style="background: white; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px;">
                                <div id="userInfoContent"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</p>
            </div>
        </div>
    </div>
                
            <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</p>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = '/api/voice';
        
        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function showTab(tabName) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
            document.querySelector(`[onclick="showTab('${tabName}')"]`).classList.add('active');
            
            // ì„ íƒëœ íƒ­ ì½˜í…ì¸  í‘œì‹œ
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // TTS íƒ­ì´ í™œì„±í™”ë˜ë©´ ìŒì„± ëª©ë¡ ìë™ ë¡œë“œ
            if (tabName === 'default-tts' || tabName === 'user-tts') {
                loadVoicesForTTS();
            }
        }
        
        // ë…¹ìŒ ê´€ë ¨ ë³€ìˆ˜ë“¤
        let mediaRecorder = null;
        let audioChunks = [];
        let recordingStartTime = null;
        let recordingTimer = null;
        let recordedBlob = null;
        
        // ìŠ¤í¬ë¦½íŠ¸ ê´€ë ¨ ë³€ìˆ˜ë“¤
        let currentScriptIndex = 0;
        const recordingScripts = [
            {
                title: "ê¸°ë³¸ ì¸ì‚¬ ìŠ¤í¬ë¦½íŠ¸",
                content: `
                    <p><strong>ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ë„¤ìš”.</strong></p>
                    <p>ì €ëŠ” ì¸ê³µì§€ëŠ¥ ìŒì„± ëª¨ë¸ì„ ë§Œë“¤ê¸° ìœ„í•´ ë…¹ìŒì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                    <p>ì´ ìŒì„±ì€ ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ì‚¬ìš©ë  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
                    <p>ê°ì‚¬í•©ë‹ˆë‹¤! ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”.</p>
                `
            },
            {
                title: "ë‹¤ì–‘í•œ ì–µì–‘ ìŠ¤í¬ë¦½íŠ¸",
                content: `
                    <p><strong>ì •ë§ ë†€ë¼ì›Œìš”!</strong> ì˜¤ëŠ˜ì€ íŠ¹ë³„í•œ ë‚ ì´ì—ìš”.</p>
                    <p>ì¡°ìš©íˆ ë§í•  ë•ŒëŠ” ì´ë ‡ê²Œ ì†Œê·¼ì†Œê·¼ ê±°ë ¤ìš”.</p>
                    <p>ë°˜ë¬¸í•  ë•ŒëŠ” "ì •ë§ìš”?" ì´ë ‡ê²Œ ë§í•´ìš”.</p>
                    <p>ê¸°ì  ë•ŒëŠ” "ì™€! ëŒ€ë°•!" ì´ë ‡ê²Œ í‘œí˜„í•´ìš”.</p>
                `
            },
            {
                title: "ì¼ìƒ ëŒ€í™” ìŠ¤í¬ë¦½íŠ¸",
                content: `
                    <p><strong>ì˜¤ëŠ˜ ì ì‹¬ ë­ ë¨¹ì„ê¹Œìš”?</strong></p>
                    <p>í•œì‹ì´ ì¢‹ì„ê¹Œìš”, ì•„ë‹ˆë©´ ì–‘ì‹ì´ ì¢‹ì„ê¹Œìš”?</p>
                    <p>ì €ëŠ” ê¹€ì¹˜ì°Œê°œë¥¼ ì¶”ì²œí•´ìš”. ì •ë§ ë§›ìˆê±°ë“ ìš”!</p>
                    <p>ê·¸ëŸ¼ ê°™ì´ ê°€ì‹œì£ !</p>
                `
            },
            {
                title: "ê°ì • í‘œí˜„ ìŠ¤í¬ë¦½íŠ¸",
                content: `
                    <p><strong>ì•„, ë„ˆë¬´ ìŠ¬í¼ìš”.</strong> ì´ëŸ° ì¼ì´ ìˆì„ ì¤„ ëª°ëì–´ìš”.</p>
                    <p>í•˜ì§€ë§Œ ê´œì°®ì•„ìš”. ì–¸ì  ê°€ëŠ” ì¢‹ì•„ì§ˆ ê±°ì˜ˆìš”.</p>
                    <p>í˜ë‚´ì„¸ìš”! ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ì˜í•˜ê³  ìˆì–´ìš”.</p>
                    <p>í•¨ê»˜ ì´ê²¨ë‚´ìš”!</p>
                `
            },
            {
                title: "ì „ë¬¸ì  í†¤ ìŠ¤í¬ë¦½íŠ¸",
                content: `
                    <p><strong>ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ. ì˜¤ëŠ˜ íšŒì˜ë¥¼ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.</strong></p>
                    <p>ì²« ë²ˆì§¸ ì•ˆê±´ì€ í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™©ì— ëŒ€í•œ ë³´ê³ ì…ë‹ˆë‹¤.</p>
                    <p>ëª¨ë“  íŒ€ì›ë“¤ì˜ í˜‘ë ¥ ë•ë¶„ì— ìˆœì¡°ë¡­ê²Œ ì§„í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                    <p>ê°ì‚¬í•©ë‹ˆë‹¤.</p>
                `
            }
        ];

        // ìŒì„± ì…ë ¥ ë°©ë²• ë³€ê²½ ì´ë²¤íŠ¸
        document.querySelectorAll('input[name="audioInput"]').forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'file') {
                    document.getElementById('fileUploadSection').style.display = 'block';
                    document.getElementById('recordSection').style.display = 'none';
                    document.getElementById('audioFile').required = true;
                } else {
                    document.getElementById('fileUploadSection').style.display = 'none';
                    document.getElementById('recordSection').style.display = 'block';
                    document.getElementById('audioFile').required = false;
                }
            });
        });

        // íŒŒì¼ ì„ íƒ ì‹œ íŒŒì¼ëª… í‘œì‹œ
        document.getElementById('audioFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('selectedFile').textContent = `ì„ íƒëœ íŒŒì¼: ${file.name}`;
            }
        });

        // ë…¹ìŒ ì‹œì‘
        document.getElementById('startRecordBtn').addEventListener('click', async function() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];
                
                mediaRecorder.ondataavailable = function(event) {
                    audioChunks.push(event.data);
                };
                
                mediaRecorder.onstop = function() {
                    recordedBlob = new Blob(audioChunks, { type: 'audio/wav' });
                    const audioUrl = URL.createObjectURL(recordedBlob);
                    document.getElementById('recordedAudioPlayer').src = audioUrl;
                    document.getElementById('recordedAudio').style.display = 'block';
                    document.getElementById('recordingStatus').style.display = 'none';
                    document.getElementById('startRecordBtn').style.display = 'inline-block';
                    document.getElementById('stopRecordBtn').style.display = 'none';
                    
                    // ìŠ¤í¬ë¦½íŠ¸ ìŠ¤íƒ€ì¼ ì›ë³µ
                    document.getElementById('scriptContent').style.cssText = 'font-size: 14px; line-height: 1.6; color: #333;';
                    
                    // íƒ€ì´ë¨¸ ì •ë¦¬
                    if (recordingTimer) {
                        clearInterval(recordingTimer);
                        recordingTimer = null;
                    }
                    
                    // ìŠ¤íŠ¸ë¦¼ ì •ë¦¬
                    stream.getTracks().forEach(track => track.stop());
                };
                
                mediaRecorder.start();
                recordingStartTime = Date.now();
                
                // UI ì—…ë°ì´íŠ¸
                document.getElementById('startRecordBtn').style.display = 'none';
                document.getElementById('stopRecordBtn').style.display = 'inline-block';
                document.getElementById('recordingStatus').style.display = 'block';
                document.getElementById('recordedAudio').style.display = 'none';
                
                // ìŠ¤í¬ë¦½íŠ¸ ê°•ì¡° í‘œì‹œ
                document.getElementById('scriptContent').style.cssText = 'font-size: 14px; line-height: 1.6; color: #333; background: #fff3cd; border: 2px solid #ffc107; border-radius: 4px; padding: 10px;';
                
                // ë…¹ìŒ ì‹œê°„ íƒ€ì´ë¨¸
                recordingTimer = setInterval(updateRecordingTime, 1000);
                
            } catch (error) {
                alert('ë§ˆì´í¬ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤!\n\ní•´ê²° ë°©ë²•:\n1. chrome://flags/#unsafely-treat-insecure-origin-as-secure ì ‘ì†\n2. "Insecure origins treated as secure" ì„¤ì •ì„ "Enabled"ë¡œ ë³€ê²½\n3. "Add" ë²„íŠ¼ í´ë¦­ í›„ "http://61.80.148.182:8080/" ì¶”ê°€\n4. Chrome ì¬ì‹œì‘ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”');
                console.error('ë…¹ìŒ ì‹œì‘ ì‹¤íŒ¨:', error);
            }
        });
        
        // ë…¹ìŒ ì¤‘ì§€
        document.getElementById('stopRecordBtn').addEventListener('click', function() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
            }
        });
        
        // ë‹¤ì‹œ ë…¹ìŒ
        document.getElementById('reRecordBtn').addEventListener('click', function() {
            document.getElementById('recordedAudio').style.display = 'none';
            document.getElementById('startRecordBtn').style.display = 'inline-block';
            recordedBlob = null;
        });
        
        // ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ ë²„íŠ¼
        document.getElementById('nextScriptBtn').addEventListener('click', function() {
            currentScriptIndex = (currentScriptIndex + 1) % recordingScripts.length;
            updateScriptDisplay();
        });
        
        // ì§ì ‘ ì…ë ¥ ë²„íŠ¼
        document.getElementById('customScriptBtn').addEventListener('click', function() {
            const customScript = prompt('ë…¹ìŒí•  ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:\n\n(ì—¬ëŸ¬ ì¤„ë¡œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤)', 
                'ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ ì •ë§ ì¢‹ì€ ë‚ ì”¨ë„¤ìš”.\nì €ëŠ” ìŒì„± ëª¨ë¸ì„ ë§Œë“¤ê¸° ìœ„í•´ ë…¹ìŒì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nê°ì‚¬í•©ë‹ˆë‹¤!');
            
            if (customScript && customScript.trim()) {
                const scriptContent = customScript.split('\n').map(line => 
                    `<p>${line.trim()}</p>`
                ).join('');
                
                document.getElementById('scriptContent').innerHTML = scriptContent;
                document.getElementById('nextScriptBtn').textContent = 'ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ë¡œ';
                document.getElementById('nextScriptBtn').onclick = function() {
                    currentScriptIndex = 0;
                    updateScriptDisplay();
                    this.textContent = 'ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸';
                    this.onclick = arguments.callee;
                };
            }
        });
        
        // ìŠ¤í¬ë¦½íŠ¸ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateScriptDisplay() {
            const script = recordingScripts[currentScriptIndex];
            document.getElementById('scriptContent').innerHTML = script.content;
            
            // ìŠ¤í¬ë¦½íŠ¸ ì œëª© í‘œì‹œ (ì„ íƒì‚¬í•­)
            const scriptTitle = document.createElement('div');
            scriptTitle.style.cssText = 'font-size: 12px; color: #666; margin-bottom: 10px; font-style: italic;';
            scriptTitle.textContent = script.title;
            
            const scriptContent = document.getElementById('scriptContent');
            scriptContent.insertBefore(scriptTitle, scriptContent.firstChild);
        }
        
        // ë…¹ìŒëœ ìŒì„± ì‚¬ìš©
        document.getElementById('useRecordedBtn').addEventListener('click', function() {
            if (recordedBlob) {
                // íŒŒì¼ ì…ë ¥ì— ë…¹ìŒëœ ìŒì„± ì„¤ì •
                const file = new File([recordedBlob], 'recorded_audio.wav', { type: 'audio/wav' });
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(file);
                document.getElementById('audioFile').files = dataTransfer.files;
                document.getElementById('selectedFile').textContent = `ì„ íƒëœ íŒŒì¼: ë…¹ìŒëœ ìŒì„± (${formatTime(Math.floor(recordedBlob.size / 16000))})`;
                
                // íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“œë¡œ ì „í™˜
                document.querySelector('input[name="audioInput"][value="file"]').checked = true;
                document.getElementById('fileUploadSection').style.display = 'block';
                document.getElementById('recordSection').style.display = 'none';
                document.getElementById('audioFile').required = true;
            }
        });
        
        // ë…¹ìŒ ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateRecordingTime() {
            if (recordingStartTime) {
                const elapsed = Math.floor((Date.now() - recordingStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('recordingTime').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }
        
        // ì‹œê°„ í¬ë§·íŒ…
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}ë¶„ ${remainingSeconds}ì´ˆ`;
        }

        // ìŒì„± ëª¨ë¸ ìƒì„±
        document.getElementById('createModelForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            showLoading(true);

            const formData = new FormData();
            formData.append('name', document.getElementById('modelName').value);
            formData.append('description', document.getElementById('modelDescription').value);
            
            // ì–¸ì–´ ì •ë³´ ì¶”ê°€
            const language = document.getElementById('modelLanguage').value;
            if (language) {
                formData.append('language', language);
            }
            
            // ìŒì„± ì…ë ¥ ë°©ë²•ì— ë”°ë¼ íŒŒì¼ ì¶”ê°€
            const audioInput = document.querySelector('input[name="audioInput"]:checked').value;
            if (audioInput === 'file') {
                const audioFile = document.getElementById('audioFile').files[0];
                if (!audioFile) {
                    showResult('createModelResult', false, 'ìŒì„± íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜ ë…¹ìŒí•´ì£¼ì„¸ìš”.');
                    showLoading(false);
                    return;
                }
                formData.append('audioFile', audioFile);
            } else if (audioInput === 'record' && recordedBlob) {
                const file = new File([recordedBlob], 'recorded_audio.wav', { type: 'audio/wav' });
                formData.append('audioFile', file);
            } else {
                showResult('createModelResult', false, 'ìŒì„±ì„ ë…¹ìŒí•´ì£¼ì„¸ìš”.');
                showLoading(false);
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/create-model`, {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                showResult('createModelResult', result.success, result.message);
                
                if (result.success) {
                    document.getElementById('voiceId').value = result.voiceId;
                    // ëª©ë¡ ìë™ ìƒˆë¡œê³ ì¹¨ ì œê±° - ì‚¬ìš©ìê°€ í•„ìš”ì‹œì—ë§Œ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ ì‚¬ìš©
                }
            } catch (error) {
                showResult('createModelResult', false, 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                showLoading(false);
            }
        });

        // ê¸°ë³¸ ìŒì„± TTS ìƒì„±
        document.getElementById('defaultVoiceForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            showLoading(true);

            const formData = new FormData();
            formData.append('voiceId', document.getElementById('defaultVoiceSelect').value);
            formData.append('text', document.getElementById('defaultTextToSpeech').value);

            try {
                const response = await fetch(`${API_BASE}/generate-speech`, {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                
                if (result.success) {
                    // ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ì„¤ì •
                    const audio = document.getElementById('defaultGeneratedAudio');
                    audio.src = result.audioUrl;
                    audio.style.display = 'block';
                    
                    // URL í‘œì‹œ
                    const urlInput = document.getElementById('defaultAudioUrlInput');
                    urlInput.value = result.audioUrl;
                    document.getElementById('defaultAudioUrl').style.display = 'block';
                    
                    // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥ (ë‹¤ìš´ë¡œë“œìš©)
                    window.defaultAudioData = result.audioData;
                    window.defaultAudioFilename = document.getElementById('defaultFilename').value || 'default_speech.mp3';
                    
                    showResult('defaultVoiceResult', true, 'ê¸°ë³¸ ìŒì„±ìœ¼ë¡œ TTSê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    showResult('defaultVoiceResult', false, result.message || 'ê¸°ë³¸ ìŒì„± TTS ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showResult('defaultVoiceResult', false, 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                showLoading(false);
            }
        });

        // ì‚¬ìš©ì ìŒì„± TTS ìƒì„±
        document.getElementById('generateSpeechForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            showLoading(true);

            const formData = new FormData();
            formData.append('voiceId', document.getElementById('voiceId').value);
            formData.append('text', document.getElementById('textToSpeech').value);

            try {
                const response = await fetch(`${API_BASE}/generate-speech`, {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                
                if (result.success) {
                    // ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ì„¤ì •
                    const audio = document.getElementById('generatedAudio');
                    audio.src = result.audioUrl;
                    audio.style.display = 'block';
                    
                    // URL í‘œì‹œ
                    const urlInput = document.getElementById('userAudioUrlInput');
                    urlInput.value = result.audioUrl;
                    document.getElementById('userAudioUrl').style.display = 'block';
                    
                    // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥ (ë‹¤ìš´ë¡œë“œìš©)
                    window.userAudioData = result.audioData;
                    window.userAudioFilename = document.getElementById('userFilename').value || 'user_speech.mp3';
                    
                    showResult('generateSpeechResult', true, 'ì‚¬ìš©ì ìŒì„±ìœ¼ë¡œ TTSê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    showResult('generateSpeechResult', false, result.message || 'ì‚¬ìš©ì ìŒì„± TTS ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showResult('generateSpeechResult', false, 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                showLoading(false);
            }
        });

        // ìŒì„± ëª©ë¡ ë¡œë“œ (ê¸°ë³¸ ìŒì„±ê³¼ ì‚¬ìš©ì ìŒì„± ëª¨ë‘)
        loadVoices();

        // TTS íƒ­ì´ í™œì„±í™”ë  ë•Œ ìŒì„± ëª©ë¡ ìë™ ë¡œë“œ
        function loadVoicesForTTS() {
            const voiceSelect = document.getElementById('defaultVoiceSelect');
            const userVoiceSelect = document.getElementById('userVoiceSelect');
            if (voiceSelect.children.length <= 1 || userVoiceSelect.children.length <= 1) { // ì˜µì…˜ì´ 1ê°œ ì´í•˜ì¼ ë•Œë§Œ ë¡œë“œ
                loadVoices();
            }
        }

        // ì „ì²´ ìŒì„± ëª©ë¡ ë²„íŠ¼
        document.getElementById('loadVoicesBtn').addEventListener('click', function() {
            showResult('voicesResult', true, 'ì „ì²´ ìŒì„± ëª©ë¡ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
            loadVoices();
        });

        // ì‚¬ìš©ì ìŒì„±ë§Œ ë³´ê¸° ë²„íŠ¼
        document.getElementById('loadUserVoicesBtn').addEventListener('click', function() {
            showResult('voicesResult', true, 'ë‚´ê°€ ìƒì„±í•œ ìŒì„± ëª©ë¡ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
            loadUserVoices();
        });

        // ì‚¬ìš©ì ìŒì„± ì„ íƒ ë“œë¡­ë‹¤ìš´ ì´ë²¤íŠ¸
        document.getElementById('userVoiceSelect').addEventListener('change', function() {
            const selectedVoiceId = this.value;
            if (selectedVoiceId) {
                document.getElementById('voiceId').value = selectedVoiceId;
            }
        });

        // ì‚¬ìš©ì ê³„ì • ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼
        document.getElementById('loadUserInfoBtn').addEventListener('click', function() {
            showResult('userInfoResult', true, 'ì‚¬ìš©ì ê³„ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
            loadUserInfo();
        });

        // TTS íˆìŠ¤í† ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼
        document.getElementById('loadHistoryBtn').addEventListener('click', function() {
            showResult('historyResult', true, 'TTS ìƒì„± íˆìŠ¤í† ë¦¬ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
            loadTtsHistory();
        });

        async function loadVoices() {
            showLoading(true);
            try {
                const response = await fetch(`${API_BASE}/voices`);
                const voices = await response.json();
            
                
                // ìŒì„± ëª¨ë¸ ëª©ë¡ ì—…ë°ì´íŠ¸
                const voicesList = document.getElementById('voicesList');
                voicesList.innerHTML = '';

                if (voices.voices && voices.voices.length > 0) {
                    voices.voices.forEach(voice => {
                        const voiceItem = document.createElement('div');
                        voiceItem.className = 'voice-item';
                        
                        // ì‚¬ìš©ìê°€ ìƒì„±í•œ ìŒì„±ì¸ ê²½ìš°ì—ë§Œ ì‚­ì œ ë²„íŠ¼ í‘œì‹œ
                        const isUserVoice = voice.category === 'cloned';
                        const buttonHtml = isUserVoice 
                            ? `<div style="display: flex; gap: 10px; margin-top: 10px;">
                                 <button class="btn" onclick="useVoice('${voice.voice_id}')" style="flex: 1;">ì´ ìŒì„± ì‚¬ìš©</button>
                                 <button class="btn" onclick="deleteVoice('${voice.voice_id}', '${voice.name}')" style="background: #dc3545; flex: 1;">ì‚­ì œ</button>
                               </div>`
                            : `<button class="btn" onclick="useVoice('${voice.voice_id}')" style="margin-top: 10px;">ì´ ìŒì„± ì‚¬ìš©</button>`;
                        
                        // ì„¤ëª… í•„ë“œ ì°¾ê¸° (ì—¬ëŸ¬ ê°€ëŠ¥í•œ ìœ„ì¹˜ í™•ì¸)
                        let description = 'ì„¤ëª… ì—†ìŒ';
                        if (voice.labels && voice.labels.description) {
                            description = voice.labels.description;
                        } else if (voice.description) {
                            description = voice.description;
                        } else if (voice.labels && voice.labels.accent) {
                            description = voice.labels.accent;
                        }
                        
                        // ì–¸ì–´ ì •ë³´ í‘œì‹œ
                        let languageInfo = '';
                        if (voice.labels && voice.labels.language) {
                            const languageCode = voice.labels.language;
                            const languageNames = {
                                'ko': 'ğŸ‡°ğŸ‡· í•œêµ­ì–´', 'en': 'ğŸ‡ºğŸ‡¸ ì˜ì–´', 'ja': 'ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´', 'zh': 'ğŸ‡¨ğŸ‡³ ì¤‘êµ­ì–´',
                                'es': 'ğŸ‡ªğŸ‡¸ ìŠ¤í˜ì¸ì–´', 'fr': 'ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤ì–´', 'de': 'ğŸ‡©ğŸ‡ª ë…ì¼ì–´', 'it': 'ğŸ‡®ğŸ‡¹ ì´íƒˆë¦¬ì•„ì–´',
                                'pt': 'ğŸ‡µğŸ‡¹ í¬ë¥´íˆ¬ê°ˆì–´', 'ru': 'ğŸ‡·ğŸ‡º ëŸ¬ì‹œì•„ì–´', 'ar': 'ğŸ‡¸ğŸ‡¦ ì•„ëì–´', 'hi': 'ğŸ‡®ğŸ‡³ íŒë””ì–´',
                                'th': 'ğŸ‡¹ğŸ‡­ íƒœêµ­ì–´', 'vi': 'ğŸ‡»ğŸ‡³ ë² íŠ¸ë‚¨ì–´', 'nl': 'ğŸ‡³ğŸ‡± ë„¤ëœë€ë“œì–´', 'sv': 'ğŸ‡¸ğŸ‡ª ìŠ¤ì›¨ë´ì–´',
                                'no': 'ğŸ‡³ğŸ‡´ ë…¸ë¥´ì›¨ì´ì–´', 'da': 'ğŸ‡©ğŸ‡° ë´ë§ˆí¬ì–´', 'fi': 'ğŸ‡«ğŸ‡® í•€ë€ë“œì–´', 'pl': 'ğŸ‡µğŸ‡± í´ë€ë“œì–´',
                                'tr': 'ğŸ‡¹ğŸ‡· í„°í‚¤ì–´', 'he': 'ğŸ‡®ğŸ‡± íˆë¸Œë¦¬ì–´', 'id': 'ğŸ‡®ğŸ‡© ì¸ë„ë„¤ì‹œì•„ì–´', 'ms': 'ğŸ‡²ğŸ‡¾ ë§ë ˆì´ì–´',
                                'fil': 'ğŸ‡µğŸ‡­ í•„ë¦¬í•€ì–´', 'uk': 'ğŸ‡ºğŸ‡¦ ìš°í¬ë¼ì´ë‚˜ì–´', 'cs': 'ğŸ‡¨ğŸ‡¿ ì²´ì½”ì–´', 'hu': 'ğŸ‡­ğŸ‡º í—ê°€ë¦¬ì–´',
                                'ro': 'ğŸ‡·ğŸ‡´ ë£¨ë§ˆë‹ˆì•„ì–´', 'bg': 'ğŸ‡§ğŸ‡¬ ë¶ˆê°€ë¦¬ì•„ì–´', 'hr': 'ğŸ‡­ğŸ‡· í¬ë¡œì•„í‹°ì•„ì–´', 'sk': 'ğŸ‡¸ğŸ‡° ìŠ¬ë¡œë°”í‚¤ì•„ì–´',
                                'sl': 'ğŸ‡¸ğŸ‡® ìŠ¬ë¡œë² ë‹ˆì•„ì–´', 'et': 'ğŸ‡ªğŸ‡ª ì—ìŠ¤í† ë‹ˆì•„ì–´', 'lv': 'ğŸ‡±ğŸ‡» ë¼íŠ¸ë¹„ì•„ì–´', 'lt': 'ğŸ‡±ğŸ‡¹ ë¦¬íˆ¬ì•„ë‹ˆì•„ì–´',
                                'el': 'ğŸ‡¬ğŸ‡· ê·¸ë¦¬ìŠ¤ì–´', 'ca': 'ğŸ‡ªğŸ‡¸ ì¹´íƒˆë£¨ëƒì–´', 'eu': 'ğŸ‡ªğŸ‡¸ ë°”ìŠ¤í¬ì–´', 'gl': 'ğŸ‡ªğŸ‡¸ ê°ˆë¦¬ì‹œì•„ì–´',
                                'cy': 'ğŸ‡¬ğŸ‡§ ì›¨ì¼ìŠ¤ì–´', 'ga': 'ğŸ‡®ğŸ‡ª ì•„ì¼ëœë“œì–´', 'mt': 'ğŸ‡²ğŸ‡¹ ëª°íƒ€ì–´', 'is': 'ğŸ‡®ğŸ‡¸ ì•„ì´ìŠ¬ë€ë“œì–´'
                            };
                            languageInfo = `<p><strong>ì–¸ì–´:</strong> ${languageNames[languageCode] || languageCode}</p>`;
                        }
                        
                        voiceItem.innerHTML = `
                            <h3>${voice.name}</h3>
                            <p><strong>ID:</strong> ${voice.voice_id}</p>
                            <p><strong>ì„¤ëª…:</strong> ${description}</p>
                            <p><strong>ì¹´í…Œê³ ë¦¬:</strong> ${voice.category || 'ì‚¬ìš©ì ì •ì˜'}</p>
                            ${languageInfo}
                            ${buttonHtml}
                        `;
                        voicesList.appendChild(voiceItem);
                    });
                } else {
                    voicesList.innerHTML = '<p>ì‚¬ìš© ê°€ëŠ¥í•œ ìŒì„± ëª¨ë¸ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                }

                // ê¸°ë³¸ ìŒì„± ë“œë¡­ë‹¤ìš´ ì—…ë°ì´íŠ¸ (ëª¨ë“  ìŒì„± í‘œì‹œ)
                const voiceSelect = document.getElementById('defaultVoiceSelect');
                voiceSelect.innerHTML = '<option value="">ìŒì„±ì„ ì„ íƒí•˜ì„¸ìš”...</option>';

                // ì‚¬ìš©ì ìŒì„± ë“œë¡­ë‹¤ìš´ ì—…ë°ì´íŠ¸ (ì‚¬ìš©ì ìƒì„± ìŒì„±ë§Œ í•„í„°ë§)
                const userVoiceSelect = document.getElementById('userVoiceSelect');
                userVoiceSelect.innerHTML = '<option value="">ì‚¬ìš©ì ìŒì„±ì„ ì„ íƒí•˜ì„¸ìš”...</option>';

                if (voices.voices && voices.voices.length > 0) {
                    voices.voices.forEach(voice => {
                        // ëª¨ë“  ìŒì„±ì„ ê¸°ë³¸ ìŒì„± ë“œë¡­ë‹¤ìš´ì— í‘œì‹œ
                        const option = document.createElement('option');
                        option.value = voice.voice_id;
                        
                        // ì–¸ì–´ ì •ë³´ ì¶”ê°€
                        let languageInfo = '';
                        if (voice.labels && voice.labels.language) {
                            const languageCode = voice.labels.language;
                            const languageNames = {
                                'ko': 'ğŸ‡°ğŸ‡·', 'en': 'ğŸ‡ºğŸ‡¸', 'ja': 'ğŸ‡¯ğŸ‡µ', 'zh': 'ğŸ‡¨ğŸ‡³',
                                'es': 'ğŸ‡ªğŸ‡¸', 'fr': 'ğŸ‡«ğŸ‡·', 'de': 'ğŸ‡©ğŸ‡ª', 'it': 'ğŸ‡®ğŸ‡¹',
                                'pt': 'ğŸ‡µğŸ‡¹', 'ru': 'ğŸ‡·ğŸ‡º', 'ar': 'ğŸ‡¸ğŸ‡¦', 'hi': 'ğŸ‡®ğŸ‡³',
                                'th': 'ğŸ‡¹ğŸ‡­', 'vi': 'ğŸ‡»ğŸ‡³', 'nl': 'ğŸ‡³ğŸ‡±', 'sv': 'ğŸ‡¸ğŸ‡ª',
                                'no': 'ğŸ‡³ğŸ‡´', 'da': 'ğŸ‡©ğŸ‡°', 'fi': 'ğŸ‡«ğŸ‡®', 'pl': 'ğŸ‡µğŸ‡±',
                                'tr': 'ğŸ‡¹ğŸ‡·', 'he': 'ğŸ‡®ğŸ‡±', 'id': 'ğŸ‡®ğŸ‡©', 'ms': 'ğŸ‡²ğŸ‡¾',
                                'fil': 'ğŸ‡µğŸ‡­', 'uk': 'ğŸ‡ºğŸ‡¦', 'cs': 'ğŸ‡¨ğŸ‡¿', 'hu': 'ğŸ‡­ğŸ‡º',
                                'ro': 'ğŸ‡·ğŸ‡´', 'bg': 'ğŸ‡§ğŸ‡¬', 'hr': 'ğŸ‡­ğŸ‡·', 'sk': 'ğŸ‡¸ğŸ‡°',
                                'sl': 'ğŸ‡¸ğŸ‡®', 'et': 'ğŸ‡ªğŸ‡ª', 'lv': 'ğŸ‡±ğŸ‡»', 'lt': 'ğŸ‡±ğŸ‡¹',
                                'el': 'ğŸ‡¬ğŸ‡·', 'ca': 'ğŸ‡ªğŸ‡¸', 'eu': 'ğŸ‡ªğŸ‡¸', 'gl': 'ğŸ‡ªğŸ‡¸',
                                'cy': 'ğŸ‡¬ğŸ‡§', 'ga': 'ğŸ‡®ğŸ‡ª', 'mt': 'ğŸ‡²ğŸ‡¹', 'is': 'ğŸ‡®ğŸ‡¸'
                            };
                            languageInfo = ` ${languageNames[languageCode] || languageCode}`;
                        }
                        
                        // ì¹´í…Œê³ ë¦¬ì— ë”°ë¼ ë‹¤ë¥¸ í‘œì‹œ
                        if (voice.category === 'cloned') {
                            option.textContent = `${voice.name}${languageInfo} (ë‚´ ìŒì„±)`;
                        } else {
                            option.textContent = `${voice.name}${languageInfo} (${voice.category || 'ê¸°ë³¸'})`;
                        }
                        
                        voiceSelect.appendChild(option);
                        
                        // ì‚¬ìš©ì ìƒì„± ìŒì„±ë§Œ ë³„ë„ ë“œë¡­ë‹¤ìš´ì—ë„ ì¶”ê°€
                        if (voice.category === 'cloned') {
                            const userOption = document.createElement('option');
                            userOption.value = voice.voice_id;
                            userOption.textContent = `${voice.name}${languageInfo} (ë‚´ ìŒì„±)`;
                            userVoiceSelect.appendChild(userOption);
                        }
                    });
                }
            } catch (error) {
                console.error('ìŒì„± ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
            } finally {
                showLoading(false);
            }
        }

        async function loadUserInfo() {
            showLoading(true);
            try {
                const response = await fetch(`${API_BASE}/user-info`);
                const userInfo = await response.json();
                
                const userInfoContent = document.getElementById('userInfoContent');
                userInfoContent.innerHTML = '';
                
                // ê³„ì • ì •ë³´ í‘œì‹œ
                const infoHtml = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h4 style="color: #495057; margin: 0 0 10px 0;">ğŸ‘¤ ê³„ì • ì •ë³´</h4>
                            <p><strong>ê³„ì • ìœ í˜•:</strong> ${userInfo.subscription?.tier || 'ë¬´ë£Œ'}</p>
                            <p><strong>ê°€ì…ì¼:</strong> ${userInfo.subscription?.created_at ? new Date(userInfo.subscription.created_at * 1000).toLocaleDateString() : 'ì•Œ ìˆ˜ ì—†ìŒ'}</p>
                            <p><strong>ë‹¤ìŒ ê²°ì œì¼:</strong> ${userInfo.subscription?.next_character_count_reset_unix ? new Date(userInfo.subscription.next_character_count_reset_unix * 1000).toLocaleDateString() : 'ì•Œ ìˆ˜ ì—†ìŒ'}</p>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h4 style="color: #495057; margin: 0 0 10px 0;">ğŸ¤ ìŒì„± ëª¨ë¸</h4>
                            <p><strong>ìƒì„±ëœ ìŒì„± ëª¨ë¸:</strong> ${userInfo.subscription?.voice_limit || 'ì•Œ ìˆ˜ ì—†ìŒ'}ê°œ</p>
                            <p><strong>ìŒì„± ëª¨ë¸ í•œë„:</strong> ${userInfo.subscription?.can_extend_voice_limit ? 'í™•ì¥ ê°€ëŠ¥' : 'í•œë„ ë„ë‹¬'}</p>
                            <p><strong>ìŒì„± ëª¨ë¸ ì‚­ì œ:</strong> ${userInfo.subscription?.can_use_instant_voice_cloning ? 'ê°€ëŠ¥' : 'ë¶ˆê°€ëŠ¥'}</p>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h4 style="color: #495057; margin: 0 0 10px 0;">ğŸ“Š ì‚¬ìš©ëŸ‰</h4>
                            <p><strong>ì´ë²ˆ ë‹¬ ì‚¬ìš©:</strong> ${userInfo.subscription?.character_count || 0}ì</p>
                            <p><strong>ì´ë²ˆ ë‹¬ í•œë„:</strong> ${userInfo.subscription?.character_limit || 0}ì</p>
                            <p><strong>ë‚¨ì€ ì‚¬ìš©ëŸ‰:</strong> ${(userInfo.subscription?.character_limit || 0) - (userInfo.subscription?.character_count || 0)}ì</p>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <h4 style="color: #495057; margin: 0 0 10px 0;">ğŸ’¡ í•œë„ ì •ë³´</h4>
                            <p><strong>ë¬´ë£Œ ê³„ì •:</strong> ì›” 10,000ì</p>
                            <p><strong>Starter:</strong> ì›” 30,000ì</p>
                            <p><strong>Creator:</strong> ì›” 250,000ì</p>
                            <p><strong>Independent Publisher:</strong> ì›” 1,000,000ì</p>
                            <p><strong>Growing Business:</strong> ì›” 2,500,000ì</strong></p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #e7f3ff; border-radius: 8px;">
                        <h5 style="color: #0d6efd; margin: 0 0 10px 0;">ğŸ“‹ ElevenLabs í”Œëœë³„ ìŒì„± ëª¨ë¸ í•œë„</h5>
                        <ul style="margin: 0; padding-left: 20px; color: #333;">
                            <li><strong>ë¬´ë£Œ:</strong> ìŒì„± ëª¨ë¸ ìƒì„± ë¶ˆê°€</li>
                            <li><strong>Starter ($22/ì›”):</strong> ìµœëŒ€ 10ê°œ ìŒì„± ëª¨ë¸</li>
                            <li><strong>Creator ($99/ì›”):</strong> ìµœëŒ€ 30ê°œ ìŒì„± ëª¨ë¸</li>
                            <li><strong>Independent Publisher ($330/ì›”):</strong> ìµœëŒ€ 100ê°œ ìŒì„± ëª¨ë¸</li>
                            <li><strong>Growing Business ($825/ì›”):</strong> ìµœëŒ€ 250ê°œ ìŒì„± ëª¨ë¸</li>
                        </ul>
                    </div>
                `;
                
                userInfoContent.innerHTML = infoHtml;
                document.getElementById('userInfoDisplay').style.display = 'block';
                
            } catch (error) {
                console.error('ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
                showResult('userInfoResult', false, 'ì‚¬ìš©ì ì •ë³´ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        async function loadUserVoices() {
            showLoading(true);
            try {
                const response = await fetch(`${API_BASE}/user-voices`);
                const voices = await response.json();
                
                // ì‚¬ìš©ì ìŒì„± ëª¨ë¸ ëª©ë¡ ì—…ë°ì´íŠ¸
                const voicesList = document.getElementById('voicesList');
                voicesList.innerHTML = '';

                if (voices.voices && voices.voices.length > 0) {
                    // ì‚¬ìš©ì ìƒì„± ìŒì„±ë§Œ í•„í„°ë§ (categoryê°€ 'cloned'ì¸ ê²ƒë“¤)
                    const userVoices = voices.voices.filter(voice => voice.category === 'cloned');
                    
                    if (userVoices.length > 0) {
                        userVoices.forEach(voice => {
                            const voiceItem = document.createElement('div');
                            voiceItem.className = 'voice-item';
                            
                            // ì„¤ëª… í•„ë“œ ì°¾ê¸° (ì—¬ëŸ¬ ê°€ëŠ¥í•œ ìœ„ì¹˜ í™•ì¸)
                            let description = 'ì„¤ëª… ì—†ìŒ';
                            if (voice.labels && voice.labels.description) {
                                description = voice.labels.description;
                            } else if (voice.description) {
                                description = voice.description;
                            } else if (voice.labels && voice.labels.accent) {
                                description = voice.labels.accent;
                            }
                            
                            // ì–¸ì–´ ì •ë³´ í‘œì‹œ
                            let languageInfo = '';
                            if (voice.labels && voice.labels.language) {
                                const languageCode = voice.labels.language;
                                const languageNames = {
                                    'ko': 'ğŸ‡°ğŸ‡· í•œêµ­ì–´', 'en': 'ğŸ‡ºğŸ‡¸ ì˜ì–´', 'ja': 'ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´', 'zh': 'ğŸ‡¨ğŸ‡³ ì¤‘êµ­ì–´',
                                    'es': 'ğŸ‡ªğŸ‡¸ ìŠ¤í˜ì¸ì–´', 'fr': 'ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤ì–´', 'de': 'ğŸ‡©ğŸ‡ª ë…ì¼ì–´', 'it': 'ğŸ‡®ğŸ‡¹ ì´íƒˆë¦¬ì•„ì–´',
                                    'pt': 'ğŸ‡µğŸ‡¹ í¬ë¥´íˆ¬ê°ˆì–´', 'ru': 'ğŸ‡·ğŸ‡º ëŸ¬ì‹œì•„ì–´', 'ar': 'ğŸ‡¸ğŸ‡¦ ì•„ëì–´', 'hi': 'ğŸ‡®ğŸ‡³ íŒë””ì–´',
                                    'th': 'ğŸ‡¹ğŸ‡­ íƒœêµ­ì–´', 'vi': 'ğŸ‡»ğŸ‡³ ë² íŠ¸ë‚¨ì–´', 'nl': 'ğŸ‡³ğŸ‡± ë„¤ëœë€ë“œì–´', 'sv': 'ğŸ‡¸ğŸ‡ª ìŠ¤ì›¨ë´ì–´',
                                    'no': 'ğŸ‡³ğŸ‡´ ë…¸ë¥´ì›¨ì´ì–´', 'da': 'ğŸ‡©ğŸ‡° ë´ë§ˆí¬ì–´', 'fi': 'ğŸ‡«ğŸ‡® í•€ë€ë“œì–´', 'pl': 'ğŸ‡µğŸ‡± í´ë€ë“œì–´',
                                    'tr': 'ğŸ‡¹ğŸ‡· í„°í‚¤ì–´', 'he': 'ğŸ‡®ğŸ‡± íˆë¸Œë¦¬ì–´', 'id': 'ğŸ‡®ğŸ‡© ì¸ë„ë„¤ì‹œì•„ì–´', 'ms': 'ğŸ‡²ğŸ‡¾ ë§ë ˆì´ì–´',
                                    'fil': 'ğŸ‡µğŸ‡­ í•„ë¦¬í•€ì–´', 'uk': 'ğŸ‡ºğŸ‡¦ ìš°í¬ë¼ì´ë‚˜ì–´', 'cs': 'ğŸ‡¨ğŸ‡¿ ì²´ì½”ì–´', 'hu': 'ğŸ‡­ğŸ‡º í—ê°€ë¦¬ì–´',
                                    'ro': 'ğŸ‡·ğŸ‡´ ë£¨ë§ˆë‹ˆì•„ì–´', 'bg': 'ğŸ‡§ğŸ‡¬ ë¶ˆê°€ë¦¬ì•„ì–´', 'hr': 'ğŸ‡­ğŸ‡· í¬ë¡œì•„í‹°ì•„ì–´', 'sk': 'ğŸ‡¸ğŸ‡° ìŠ¬ë¡œë°”í‚¤ì•„ì–´',
                                    'sl': 'ğŸ‡¸ğŸ‡® ìŠ¬ë¡œë² ë‹ˆì•„ì–´', 'et': 'ğŸ‡ªğŸ‡ª ì—ìŠ¤í† ë‹ˆì•„ì–´', 'lv': 'ğŸ‡±ğŸ‡» ë¼íŠ¸ë¹„ì•„ì–´', 'lt': 'ğŸ‡±ğŸ‡¹ ë¦¬íˆ¬ì•„ë‹ˆì•„ì–´',
                                    'el': 'ğŸ‡¬ğŸ‡· ê·¸ë¦¬ìŠ¤ì–´', 'ca': 'ğŸ‡ªğŸ‡¸ ì¹´íƒˆë£¨ëƒì–´', 'eu': 'ğŸ‡ªğŸ‡¸ ë°”ìŠ¤í¬ì–´', 'gl': 'ğŸ‡ªğŸ‡¸ ê°ˆë¦¬ì‹œì•„ì–´',
                                    'cy': 'ğŸ‡¬ğŸ‡§ ì›¨ì¼ìŠ¤ì–´', 'ga': 'ğŸ‡®ğŸ‡ª ì•„ì¼ëœë“œì–´', 'mt': 'ğŸ‡²ğŸ‡¹ ëª°íƒ€ì–´', 'is': 'ğŸ‡®ğŸ‡¸ ì•„ì´ìŠ¬ë€ë“œì–´'
                                };
                                languageInfo = `<p><strong>ì–¸ì–´:</strong> ${languageNames[languageCode] || languageCode}</p>`;
                            }
                            
                            voiceItem.innerHTML = `
                                <h3>${voice.name}</h3>
                                <p><strong>ID:</strong> ${voice.voice_id}</p>
                                <p><strong>ì„¤ëª…:</strong> ${description}</p>
                                <p><strong>ì¹´í…Œê³ ë¦¬:</strong> ${voice.category || 'ì‚¬ìš©ì ì •ì˜'}</p>
                                ${languageInfo}
                                <div style="display: flex; gap: 10px; margin-top: 10px;">
                                    <button class="btn" onclick="useVoice('${voice.voice_id}')" style="flex: 1;">ì´ ìŒì„± ì‚¬ìš©</button>
                                    <button class="btn" onclick="deleteVoice('${voice.voice_id}', '${voice.name}')" style="background: #dc3545; flex: 1;">ì‚­ì œ</button>
                                </div>
                            `;
                            voicesList.appendChild(voiceItem);
                        });
                    } else {
                        voicesList.innerHTML = '<p>ì•„ì§ ìƒì„±í•œ ìŒì„± ëª¨ë¸ì´ ì—†ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ìŒì„± ëª¨ë¸ì„ ìƒì„±í•´ë³´ì„¸ìš”!</p>';
                    }
                } else {
                    voicesList.innerHTML = '<p>ì•„ì§ ìƒì„±í•œ ìŒì„± ëª¨ë¸ì´ ì—†ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ìŒì„± ëª¨ë¸ì„ ìƒì„±í•´ë³´ì„¸ìš”!</p>';
                }
            } catch (error) {
                console.error('ì‚¬ìš©ì ìŒì„± ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
            } finally {
                showLoading(false);
            }
        }

        // ìŒì„± ID ìë™ ì…ë ¥
        function useVoice(voiceId) {
            document.getElementById('voiceId').value = voiceId;
            document.getElementById('voiceId').scrollIntoView({ behavior: 'smooth' });
        }

        // ê²°ê³¼ í‘œì‹œ
        function showResult(elementId, success, message) {
            const element = document.getElementById(elementId);
            element.className = `result ${success ? 'success' : 'error'}`;
            element.textContent = message;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }

        // ë¡œë”© í‘œì‹œ/ìˆ¨ê¹€
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        // URL ë³µì‚¬ ê¸°ëŠ¥
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            element.select();
            element.setSelectionRange(0, 99999); // ëª¨ë°”ì¼ìš©
            document.execCommand('copy');
            
            // ë³µì‚¬ ì™„ë£Œ ë©”ì‹œì§€
            const originalText = element.value;
            element.value = 'URLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
            setTimeout(() => {
                element.value = originalText;
            }, 2000);
        }

        // ê¸°ë³¸ ìŒì„± MP3 ë‹¤ìš´ë¡œë“œ
        function downloadDefaultAudio() {
            if (window.defaultAudioData) {
                const byteCharacters = atob(window.defaultAudioData);
                const byteNumbers = new Array(byteCharacters.length);
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray], { type: 'audio/mpeg' });
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = window.defaultAudioFilename;
                link.click();
            }
        }

        // ì‚¬ìš©ì ìŒì„± MP3 ë‹¤ìš´ë¡œë“œ
        function downloadUserAudio() {
            if (window.userAudioData) {
                const byteCharacters = atob(window.userAudioData);
                const byteNumbers = new Array(byteCharacters.length);
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray], { type: 'audio/mpeg' });
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = window.userAudioFilename;
                link.click();
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìŒì„± ëª©ë¡ ë¡œë“œ
        window.addEventListener('load', loadVoices);

        async function loadTtsHistory() {
            showLoading(true);
            try {
                const response = await fetch(`${API_BASE}/history`);
                const historyList = document.getElementById('historyList');
                historyList.innerHTML = '';

                if (response.ok) {
                    // ì‘ë‹µ ë³¸ë¬¸ì´ ë¹„ì–´ìˆì§€ ì•Šì€ ê²½ìš°ë§Œ json íŒŒì‹±
                    const text = await response.text();
                    if (text) {
                        const history = JSON.parse(text);
                        
                        // ì‘ë‹µ êµ¬ì¡°ì— ë§ê²Œ ì²˜ë¦¬
                        let historyArray = [];
                        if (history.history && history.history.history) {
                            // { "history": { "history": [...], "last_history_item_id": "...", "has_more": false } }
                            historyArray = history.history.history;
                        } else if (history.history && Array.isArray(history.history)) {
                            // { "history": [...] }
                            historyArray = history.history;
                        } else if (Array.isArray(history)) {
                            // [...] ì§ì ‘ ë°°ì—´
                            historyArray = history;
                        }
                        
                        if (historyArray && historyArray.length > 0) {
                            historyArray.forEach(item => {
                                // ì˜¤ë””ì˜¤ URL ìƒì„± (í”„ë¡ì‹œë¥¼ í†µí•œ ë‹¤ìš´ë¡œë“œ)
                                const audioUrl = `${API_BASE}/history/${item.history_item_id}/audio`;
                                
                                // í…ìŠ¤íŠ¸ ë””ì½”ë”© (í•œê¸€ ê¹¨ì§ ë°©ì§€)
                                let displayText = item.text || '';
                                
                                // dialogueê°€ ìˆëŠ” ê²½ìš° í…ìŠ¤íŠ¸ ì¶”ì¶œ
                                if (!displayText && item.dialogue && item.dialogue.length > 0) {
                                    displayText = item.dialogue.map(d => d.text).join(' ');
                                }
                                
                                const historyItem = document.createElement('div');
                                historyItem.className = 'history-item';
                                historyItem.innerHTML = `
                                    <h3>${item.voice_name || 'ìŒì„± ì´ë¦„ ì—†ìŒ'}</h3>
                                    <p><strong>ìƒì„±ì¼:</strong> ${new Date(item.date_unix * 1000).toLocaleString()}</p>
                                    <div class="audio-controls">
                                        <audio controls src="${audioUrl}" style="width: 100%;"></audio>
                                    </div>
                                    <div class="btn-group">
                                        <a href="${audioUrl}" download class="btn btn-small" style="background: #28a745;">MP3 ë‹¤ìš´ë¡œë“œ</a>
                                        <button class="btn btn-small" style="background: #dc3545;" onclick="deleteTtsHistoryItem('${item.history_item_id}')">ì‚­ì œ</button>
                                    </div>
                                `;
                                historyList.appendChild(historyItem);
                            });
                        } else {
                            historyList.innerHTML = '<p>ìƒì„±ëœ TTS íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                        }
                    } else {
                        historyList.innerHTML = '<p>ìƒì„±ëœ TTS íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                    }
                } else {
                    // ì—ëŸ¬ ì‘ë‹µ ë³¸ë¬¸ë„ ì¶œë ¥
                    const errorText = await response.text();
                    historyList.innerHTML = `<p>ì„œë²„ ì˜¤ë¥˜ ë˜ëŠ” ì¸ì¦ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.<br>ìƒíƒœì½”ë“œ: ${response.status}<br>ë©”ì‹œì§€: ${errorText || 'ì—†ìŒ'}</p>`;
                    console.error('TTS íˆìŠ¤í† ë¦¬ API ì˜¤ë¥˜:', response.status, errorText);
                }
            } catch (error) {
                console.error('TTS íˆìŠ¤í† ë¦¬ ë¡œë“œ ì‹¤íŒ¨:', error);
            } finally {
                showLoading(false);
            }
        }

        // ìŒì„± ëª¨ë¸ ì‚­ì œ
        async function deleteVoice(voiceId, voiceName) {
            if (!confirm(`ì •ë§ë¡œ ìŒì„± ëª¨ë¸ "${voiceName}"ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nâš ï¸ ì‚­ì œëœ ìŒì„± ëª¨ë¸ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)) return;
            showLoading(true);
            try {
                const response = await fetch(`${API_BASE}/voices/${voiceId}`, { method: 'DELETE' });
                if (response.ok) {
                    showResult('voicesResult', true, `ìŒì„± ëª¨ë¸ "${voiceName}"ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
                    // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                    if (document.getElementById('voicesList').innerHTML.includes('cloned')) {
                        loadUserVoices();
                    } else {
                        loadVoices();
                    }
                } else {
                    const errorData = await response.json();
                    showResult('voicesResult', false, `ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${errorData.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);
                }
            } catch (error) {
                showResult('voicesResult', false, 'ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        // TTS íˆìŠ¤í† ë¦¬ í•­ëª© ì‚­ì œ
        async function deleteTtsHistoryItem(historyItemId) {
            if (!confirm('ì •ë§ë¡œ ì´ TTS ìŒì„± íŒŒì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            showLoading(true);
            try {
                const response = await fetch(`${API_BASE}/history/${historyItemId}`, { method: 'DELETE' });
                if (response.ok) {
                    showResult('historyResult', true, 'ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadTtsHistory();
                } else {
                    showResult('historyResult', false, 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                showResult('historyResult', false, 'ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
            } finally {
                showLoading(false);
            }
        }
    </script>
</body>
</html> 